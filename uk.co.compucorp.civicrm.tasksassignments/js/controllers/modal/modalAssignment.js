define(['controllers/controllers',        'services/assignment'], function(controllers){    controllers.controller('ModalAssignmentCtrl',['$scope', '$modalInstance', '$rootScope', '$q', '$log', '$filter',         'AssignmentService', 'data', 'config',        function($scope, $modalInstance, $rootScope, $q, $log, $filter, AssignmentService, data, config){            $log.debug('Controller: ModalAssignmentCtrl');            $scope.assignment = {};            angular.copy(data,$scope.assignment);            $scope.assignment.target_contact_id = $scope.assignment.target_contact_id || [config.CONTACT_ID];            $scope.dpOpen = function($event){                $event.preventDefault();                $event.stopPropagation();                $scope.dpOpened = true;            }            $scope.cancel = function(){                $modalInstance.dismiss('cancel');            }            $scope.confirm = function(){                console.log($scope.assignment);                console.log(angular.equals($scope.assignment,data));                AssignmentService.save($scope.assignment).then(function(results){                    $modalInstance.close(angular.extend(results,$scope.assignment));                },function(reason){                    CRM.alert(reason, 'Error', 'error');                    $modalInstance.dismiss();                    return $q.reject();                });            }        }]);});