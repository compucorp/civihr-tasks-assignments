!function(t,e){"use strict";t.module("crm-tasks-workflows.constants",[]).constant("customFieldIds",e.vars.customFieldIds)}(angular,CRM),function(t){"use strict";angular.module("crm-tasks-workflows.controllers",[])}(),function(t){"use strict";angular.module("crm-tasks-workflows.core",["crmCaseType"])}(),function(t){"use strict";angular.module("crm-tasks-workflows.decorators",[])}(),function(t){"use strict";function e(t,e,o,s,r,a,c){e.debug("Controller: CaseTypeExtendedController");var i,n,l,u,d={};function p(t,e){d.addActivity(t,e),t.activityTypes.forEach(function(t){t.name===e&&delete t.reference_activity})}r.actTypes={values:(i=a.values.map(function(t){return t.label=t.label+" (Task)",t}),n=c.values.map(function(t){return t.label=t.label+" (Document)",t}),i.concat(n))},t("CaseTypeCtrl",{$scope:o,crmApi:s,apiCalls:r}),d.addActivity=o.addActivity,o.addActivity=p,o.defaultRelationshipTypeOptions=(l=r.relTypes.values.filter(function(t){return"1"===t.is_active}),u=[],l.forEach(function(t){var e=t.label_a_b===t.label_b_a;u.push({label:t.label_b_a,value:t.id+"_b_a"}),e||u.push({label:t.label_a_b,value:t.id+"_a_b"})}),u),!o.caseType.id&&(o.caseType.definition.activitySets[0].activityTypes=[])}angular.module("crm-tasks-workflows.controllers").controller("CaseTypeExtendedController",e),e.$inject=["$controller","$log","$scope","crmApi","apiCalls","activityOptionsTask","activityOptionsDocument"]}(),function(t){"use strict";function e(t){var e,o;function s(e){return["crmApi",function(t){return t("OptionValue","get",{option_group_id:"activity_type",component_id:e,sequential:1,options:{sort:"name",limit:0}})}]}return e=t.routes["/caseType/:id"],o=t.routes["/caseType"],e.controller="CaseTypeExtendedController",e.resolve.activityOptionsTask=s("CiviTask"),e.resolve.activityOptionsDocument=s("CiviDocument"),o.resolve.caseTypes=["crmApi","customFieldIds",function(t,e){var o="custom_"+e["caseType.category"],s={options:{limit:0}};return s[o]="Workflow",t("CaseType","get",s)}],t}angular.module("crm-tasks-workflows.decorators").config(["$provide",function(t){t.decorator("$route",e)}]),e.$inject=["$delegate"]}(),function(t){"use strict";angular.module("crm-tasks-workflows",["crm-tasks-workflows.core","crm-tasks-workflows.constants","crm-tasks-workflows.controllers","crm-tasks-workflows.decorators"])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNybS10YXNrcy13b3JrZmxvd3MuY29uc3RhbnRzLmpzIiwiY3JtLXRhc2tzLXdvcmtmbG93cy5jb250cm9sbGVycy5qcyIsImNybS10YXNrcy13b3JrZmxvd3MuY29yZS5qcyIsImNybS10YXNrcy13b3JrZmxvd3MuZGVjb3JhdG9yLmpzIiwiY2FzZXR5cGUuZXh0ZW5kZWQuY29udHJvbGxlci5qcyIsInJvdXRlLmRlY29yYXRvci5qcyIsImNybS10YXNrcy13b3JrZmxvd3MuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIkNSTSIsIm1vZHVsZSIsImNvbnN0YW50IiwidmFycyIsImN1c3RvbUZpZWxkSWRzIiwiQ2FzZVR5cGVFeHRlbmRlZENvbnRyb2xsZXIiLCIkY29udHJvbGxlciIsIiRsb2ciLCIkc2NvcGUiLCJjcm1BcGkiLCJhcGlDYWxscyIsImFjdGl2aXR5T3B0aW9uc1Rhc2siLCJhY3Rpdml0eU9wdGlvbnNEb2N1bWVudCIsImRlYnVnIiwidGFza09wdGlvbnMiLCJkb2N1bWVudE9wdGlvbnMiLCJhY3RpdmVSZWxhdGlvbnNoaXBUeXBlcyIsImRlZmF1bHRSZWxhdGlvbnNoaXBUeXBlT3B0aW9ucyIsInBhcmVudE1ldGhvZHMiLCJhZGRBY3Rpdml0eSIsImFjdGl2aXR5U2V0IiwiYWN0aXZpdHlUeXBlIiwiYWN0aXZpdHlUeXBlcyIsImZvckVhY2giLCJhY3Rpdml0eSIsIm5hbWUiLCJyZWZlcmVuY2VfYWN0aXZpdHkiLCJhY3RUeXBlcyIsInZhbHVlcyIsIm1hcCIsInR5cGUiLCJsYWJlbCIsImRvY3VtZW50IiwiY29uY2F0IiwicmVsVHlwZXMiLCJmaWx0ZXIiLCJyZWxhdGlvbnNoaXBUeXBlIiwiaXNfYWN0aXZlIiwiaXNCaWRpcmVjdGlvbmFsUmVsYXRpb25zaGlwIiwibGFiZWxfYV9iIiwibGFiZWxfYl9hIiwicHVzaCIsInZhbHVlIiwiaWQiLCJjYXNlVHlwZSIsImRlZmluaXRpb24iLCJhY3Rpdml0eVNldHMiLCJjb250cm9sbGVyIiwiJGluamVjdCIsIlJvdXRlRGVjb3JhdG9yIiwiJGRlbGVnYXRlIiwiY2FzZVR5cGVFZGl0Um91dGUiLCJjYXNlVHlwZUxpc3RSb3V0ZSIsImdldFJlc29sdmVyRm9yQWN0aXZpdHlUeXBlQ29tcG9uZW50IiwiY29tcG9uZW50TmFtZSIsIm9wdGlvbl9ncm91cF9pZCIsImNvbXBvbmVudF9pZCIsInNlcXVlbnRpYWwiLCJvcHRpb25zIiwic29ydCIsImxpbWl0Iiwicm91dGVzIiwicmVzb2x2ZSIsImNhc2VUeXBlcyIsImNhc2VUeXBlQ2F0ZWdvcnlGaWVsZCIsImZpbHRlcnMiLCJjb25maWciLCIkcHJvdmlkZSIsImRlY29yYXRvciJdLCJtYXBwaW5ncyI6IkNBRUEsU0FBQUEsRUFBQUMsR0FDQSxhQUVBRCxFQUFBRSxPQUFBLGdDQUFBLElBQ0FDLFNBQUEsaUJBQUFGLEVBQUFHLEtBQUFDLGdCQUpBLENBS0FMLFFBQUFDLEtDTEEsU0FBQUQsR0FDQSxhQUdBQSxRQURBRSxPQUFBLGtDQUFBLElBSEEsR0NBQSxTQUFBRixHQUNBLGFBS0FBLFFBSEFFLE9BQUEsMkJBQUEsQ0FDQSxnQkFKQSxHQ0FBLFNBQUFGLEdBQ0EsYUFHQUEsUUFEQUUsT0FBQSxpQ0FBQSxJQUhBLEdDQUEsU0FBQUYsR0FDQSxhQVNBLFNBQUFNLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0FMLEVBQUFNLE1BQUEsMENBRUEsSUFpR0FDLEVBTUFDLEVBckRBQyxFQUNBQyxFQW5EQUMsRUFBQSxHQXVCQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBSCxFQUFBQyxZQUFBQyxFQUFBQyxHQUdBRCxFQUFBRSxjQUFBQyxRQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLE9BQUFKLFVBQ0FHLEVBQUFFLHFCQTBEQWhCLEVBQUFpQixTQUFBLENBQUFDLFFBVUFkLEVBQUFILEVBQUFpQixPQUFBQyxJQUFBLFNBQUFDLEdBR0EsT0FGQUEsRUFBQUMsTUFBQUQsRUFBQUMsTUFBQSxVQUVBRCxJQUdBZixFQUFBSCxFQUFBZ0IsT0FBQUMsSUFBQSxTQUFBRyxHQUdBLE9BRkFBLEVBQUFELE1BQUFDLEVBQUFELE1BQUEsY0FFQUMsSUFHQWxCLEVBQUFtQixPQUFBbEIsS0FyQkFULEVBQUEsZUFBQSxDQUFBRSxPQUFBQSxFQUFBQyxPQUFBQSxFQUFBQyxTQUFBQSxJQWpGQVEsRUFBQUMsWUFBQVgsRUFBQVcsWUFDQVgsRUFBQVcsWUFBQUEsRUFDQVgsRUFBQVMsZ0NBeUNBRCxFQTRCQU4sRUFBQXdCLFNBQUFOLE9BQUFPLE9BQUEsU0FBQUMsR0FDQSxNQUFBLE1BQUFBLEVBQUFDLFlBNUJBcEIsRUFBQSxHQUVBRCxFQUFBTyxRQUFBLFNBQUFhLEdBQ0EsSUFBQUUsRUFBQUYsRUFBQUcsWUFBQUgsRUFBQUksVUFFQXZCLEVBQUF3QixLQUFBLENBQ0FWLE1BQUFLLEVBQUFJLFVBQ0FFLE1BQUFOLEVBQUFPLEdBQUEsU0FHQUwsR0FDQXJCLEVBQUF3QixLQUFBLENBQ0FWLE1BQUFLLEVBQUFHLFVBQ0FHLE1BQUFOLEVBQUFPLEdBQUEsV0FLQTFCLElBM0RBVCxFQUFBb0MsU0FBQUQsS0E0QkFuQyxFQUFBb0MsU0FBQUMsV0FBQUMsYUFBQSxHQUFBeEIsY0FBQSxJQTBFQXZCLFFBMUhBRSxPQUFBLG1DQUNBOEMsV0FBQSw2QkFBQTFDLEdBRUFBLEVBQUEyQyxRQUFBLENBQ0EsY0FBQSxPQUFBLFNBQUEsU0FBQSxXQUFBLHNCQUFBLDJCQVBBLEdDQUEsU0FBQWpELEdBQ0EsYUFTQSxTQUFBa0QsRUFBQUMsR0FDQSxJQUNBQyxFQUNBQyxFQWVBLFNBQUFDLEVBQUFDLEdBQ0EsTUFBQSxDQUFBLFNBQUEsU0FBQTdDLEdBQ0EsT0FBQUEsRUFBQSxjQUFBLE1BQUEsQ0FDQThDLGdCQUFBLGdCQUNBQyxhQUFBRixFQUNBRyxXQUFBLEVBQ0FDLFFBQUEsQ0FBQUMsS0FBQSxPQUFBQyxNQUFBLE9BdUJBLE9BN0NBVCxFQUFBRCxFQUFBVyxPQUFBLGlCQUNBVCxFQUFBRixFQUFBVyxPQUFBLGFBRUFWLEVBQUFKLFdBQUEsNkJBQ0FJLEVBQUFXLFFBQUFuRCxvQkFBQTBDLEVBQUEsWUFDQUYsRUFBQVcsUUFBQWxELHdCQUFBeUMsRUFBQSxnQkFFQUQsRUFBQVUsUUFBQUMsVUE2QkEsQ0FBQSxTQUFBLGlCQUFBLFNBQUF0RCxFQUFBTCxHQUNBLElBQUE0RCxFQUFBLFVBQUE1RCxFQUFBLHFCQUNBNkQsRUFBQSxDQUFBUCxRQUFBLENBQUFFLE1BQUEsSUFHQSxPQUZBSyxFQUFBRCxHQUFBLFdBRUF2RCxFQUFBLFdBQUEsTUFBQXdELEtBSUFmLEVBRUFuRCxRQXhEQUUsT0FBQSxrQ0FDQWlFLE9BQUEsQ0FBQSxXQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLFVBQUEsU0FBQW5CLE1BR0FBLEVBQUFELFFBQUEsQ0FBQSxhQVJBLEdDQUEsU0FBQWpELEdBQ0EsYUFRQUEsUUFOQUUsT0FBQSxzQkFBQSxDQUNBLDJCQUNBLGdDQUNBLGtDQUNBLG1DQVBBIiwiZmlsZSI6ImNybS10YXNrcy13b3JrZmxvd3MubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogZ2xvYmFsIGFuZ3VsYXIgKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyLCBDUk0pIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdjcm0tdGFza3Mtd29ya2Zsb3dzLmNvbnN0YW50cycsIFtdKVxuICAgIC5jb25zdGFudCgnY3VzdG9tRmllbGRJZHMnLCBDUk0udmFycy5jdXN0b21GaWVsZElkcyk7XG59KShhbmd1bGFyLCBDUk0pO1xuIiwiLyogZ2xvYmFsIGFuZ3VsYXIgKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnY3JtLXRhc2tzLXdvcmtmbG93cy5jb250cm9sbGVycycsIFtdKTtcbn0pKGFuZ3VsYXIpO1xuIiwiLyogZ2xvYmFsIGFuZ3VsYXIgKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnY3JtLXRhc2tzLXdvcmtmbG93cy5jb3JlJywgW1xuICAgICdjcm1DYXNlVHlwZSdcbiAgXSk7XG59KShhbmd1bGFyKTtcbiIsIi8qIGdsb2JhbCBhbmd1bGFyICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2NybS10YXNrcy13b3JrZmxvd3MuZGVjb3JhdG9ycycsIFtdKTtcbn0pKGFuZ3VsYXIpO1xuIiwiLyogZ2xvYmFsIGFuZ3VsYXIgKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnY3JtLXRhc2tzLXdvcmtmbG93cy5jb250cm9sbGVycycpXG4gICAgLmNvbnRyb2xsZXIoJ0Nhc2VUeXBlRXh0ZW5kZWRDb250cm9sbGVyJywgQ2FzZVR5cGVFeHRlbmRlZENvbnRyb2xsZXIpO1xuXG4gIENhc2VUeXBlRXh0ZW5kZWRDb250cm9sbGVyLiRpbmplY3QgPSBbXG4gICAgJyRjb250cm9sbGVyJywgJyRsb2cnLCAnJHNjb3BlJywgJ2NybUFwaScsICdhcGlDYWxscycsICdhY3Rpdml0eU9wdGlvbnNUYXNrJywgJ2FjdGl2aXR5T3B0aW9uc0RvY3VtZW50J1xuICBdO1xuXG4gIGZ1bmN0aW9uIENhc2VUeXBlRXh0ZW5kZWRDb250cm9sbGVyICgkY29udHJvbGxlciwgJGxvZywgJHNjb3BlLCBjcm1BcGksIGFwaUNhbGxzLCBhY3Rpdml0eU9wdGlvbnNUYXNrLCBhY3Rpdml0eU9wdGlvbnNEb2N1bWVudCkge1xuICAgICRsb2cuZGVidWcoJ0NvbnRyb2xsZXI6IENhc2VUeXBlRXh0ZW5kZWRDb250cm9sbGVyJyk7XG5cbiAgICB2YXIgcGFyZW50TWV0aG9kcyA9IHt9O1xuXG4gICAgKGZ1bmN0aW9uIGluaXQgKCkge1xuICAgICAgdmFyIGlzTmV3Q2FzZVR5cGU7XG5cbiAgICAgIGluaXRQYXJlbnRDb250cm9sbGVyKCk7XG5cbiAgICAgIHBhcmVudE1ldGhvZHMuYWRkQWN0aXZpdHkgPSAkc2NvcGUuYWRkQWN0aXZpdHk7XG4gICAgICAkc2NvcGUuYWRkQWN0aXZpdHkgPSBhZGRBY3Rpdml0eTtcbiAgICAgICRzY29wZS5kZWZhdWx0UmVsYXRpb25zaGlwVHlwZU9wdGlvbnMgPSBnZXREZWZhdWx0UmVsYXRpb25zaGlwVHlwZU9wdGlvbnMoKTtcbiAgICAgIGlzTmV3Q2FzZVR5cGUgPSAhJHNjb3BlLmNhc2VUeXBlLmlkO1xuXG4gICAgICBpZiAoaXNOZXdDYXNlVHlwZSkge1xuICAgICAgICBjbGVhckFsbEFjdGl2aXR5VHlwZXNGcm9tTWFpbkFjdGl2aXR5U2V0KCk7XG4gICAgICB9XG4gICAgfSkoKTtcblxuICAgIC8qKlxuICAgICAqIEFkZCBuZXcgYWN0aXZpdHlcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFjdGl2aXR5U2V0XG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGFjdGl2aXR5VHlwZVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFkZEFjdGl2aXR5IChhY3Rpdml0eVNldCwgYWN0aXZpdHlUeXBlKSB7XG4gICAgICBwYXJlbnRNZXRob2RzLmFkZEFjdGl2aXR5KGFjdGl2aXR5U2V0LCBhY3Rpdml0eVR5cGUpO1xuXG4gICAgICAvLyByZW1vdmUgcmVmZXJlbmNlX2FjdGl2aXR5IHByb3BlcnR5IGZyb20gbmV3bHkgYWRkZWQgYWN0aXZpdHlcbiAgICAgIGFjdGl2aXR5U2V0LmFjdGl2aXR5VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAoYWN0aXZpdHkpIHtcbiAgICAgICAgaWYgKGFjdGl2aXR5Lm5hbWUgPT09IGFjdGl2aXR5VHlwZSkge1xuICAgICAgICAgIGRlbGV0ZSBhY3Rpdml0eS5yZWZlcmVuY2VfYWN0aXZpdHk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFycyBhbGwgdGhlIGFjdGl2aXR5IHR5cGVzIGRlZmluZWQgaW4gdGhlIG1haW4gYWN0aXZpdHkgc2V0LlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNsZWFyQWxsQWN0aXZpdHlUeXBlc0Zyb21NYWluQWN0aXZpdHlTZXQgKCkge1xuICAgICAgJHNjb3BlLmNhc2VUeXBlLmRlZmluaXRpb24uYWN0aXZpdHlTZXRzWzBdLmFjdGl2aXR5VHlwZXMgPSBbXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkZWZhdWx0IHJlbGF0aW9uc2hpcCB0eXBlIG9wdGlvbnMuIElmIHRoZSByZWxhdGlvbnNoaXAgaXNcbiAgICAgKiBiaWRpcmVjdGlvbmFsIChFeDogU3BvdXNlIG9mKSBpdCBhZGRzIGEgc2luZ2xlIG9wdGlvbiBvdGhlcndpc2UgaXQgYWRkc1xuICAgICAqIHR3byBvcHRpb25zIHJlcHJlc2VudGluZyB0aGUgcmVsYXRpb25zaGlwIHR5cGUgZGlyZWN0aW9uc1xuICAgICAqIChFeDogRW1wbG95ZWUgb2YsIEVtcGxveWVyIGlzKVxuICAgICAqXG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0RGVmYXVsdFJlbGF0aW9uc2hpcFR5cGVPcHRpb25zICgpIHtcbiAgICAgIHZhciBhY3RpdmVSZWxhdGlvbnNoaXBUeXBlcyA9IGdldEFjdGl2ZVJlbGF0aW9uc2hpcFR5cGVzKCk7XG4gICAgICB2YXIgZGVmYXVsdFJlbGF0aW9uc2hpcFR5cGVPcHRpb25zID0gW107XG5cbiAgICAgIGFjdGl2ZVJlbGF0aW9uc2hpcFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHJlbGF0aW9uc2hpcFR5cGUpIHtcbiAgICAgICAgdmFyIGlzQmlkaXJlY3Rpb25hbFJlbGF0aW9uc2hpcCA9IHJlbGF0aW9uc2hpcFR5cGUubGFiZWxfYV9iID09PSByZWxhdGlvbnNoaXBUeXBlLmxhYmVsX2JfYTtcblxuICAgICAgICBkZWZhdWx0UmVsYXRpb25zaGlwVHlwZU9wdGlvbnMucHVzaCh7XG4gICAgICAgICAgbGFiZWw6IHJlbGF0aW9uc2hpcFR5cGUubGFiZWxfYl9hLFxuICAgICAgICAgIHZhbHVlOiByZWxhdGlvbnNoaXBUeXBlLmlkICsgJ19iX2EnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghaXNCaWRpcmVjdGlvbmFsUmVsYXRpb25zaGlwKSB7XG4gICAgICAgICAgZGVmYXVsdFJlbGF0aW9uc2hpcFR5cGVPcHRpb25zLnB1c2goe1xuICAgICAgICAgICAgbGFiZWw6IHJlbGF0aW9uc2hpcFR5cGUubGFiZWxfYV9iLFxuICAgICAgICAgICAgdmFsdWU6IHJlbGF0aW9uc2hpcFR5cGUuaWQgKyAnX2FfYidcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZWZhdWx0UmVsYXRpb25zaGlwVHlwZU9wdGlvbnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3Qgb2YgYWN0aXZlIHJlbGF0aW9uc2hpcCB0eXBlcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldEFjdGl2ZVJlbGF0aW9uc2hpcFR5cGVzICgpIHtcbiAgICAgIHJldHVybiBhcGlDYWxscy5yZWxUeXBlcy52YWx1ZXMuZmlsdGVyKGZ1bmN0aW9uIChyZWxhdGlvbnNoaXBUeXBlKSB7XG4gICAgICAgIHJldHVybiByZWxhdGlvbnNoaXBUeXBlLmlzX2FjdGl2ZSA9PT0gJzEnO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGlzZSB0aGUgcGFyZW50IGNvbnRyb2xsZXJcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpbml0UGFyZW50Q29udHJvbGxlciAoKSB7XG4gICAgICBhcGlDYWxscy5hY3RUeXBlcyA9IHsgdmFsdWVzOiBwcmVwYXJlQWN0aXZpdHlUeXBlcygpIH07XG4gICAgICAkY29udHJvbGxlcignQ2FzZVR5cGVDdHJsJywgeyRzY29wZTogJHNjb3BlLCBjcm1BcGk6IGNybUFwaSwgYXBpQ2FsbHM6IGFwaUNhbGxzfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGxpc3Qgb2YgYWN0aXZpdHkgdHlwZXMgd2l0aCBjb21wb25lbnQgdHlwZSBhZGRlZCB0byBsYWJlbFxuICAgICAqXG4gICAgICogQHJldHVybiB7QXJyYXl9XG4gICAgICovXG4gICAgZnVuY3Rpb24gcHJlcGFyZUFjdGl2aXR5VHlwZXMgKCkge1xuICAgICAgdmFyIHRhc2tPcHRpb25zID0gYWN0aXZpdHlPcHRpb25zVGFzay52YWx1ZXMubWFwKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICAgIHR5cGUubGFiZWwgPSAodHlwZS5sYWJlbCArICcgKFRhc2spJyk7XG5cbiAgICAgICAgcmV0dXJuIHR5cGU7XG4gICAgICB9KTtcblxuICAgICAgdmFyIGRvY3VtZW50T3B0aW9ucyA9IGFjdGl2aXR5T3B0aW9uc0RvY3VtZW50LnZhbHVlcy5tYXAoZnVuY3Rpb24gKGRvY3VtZW50KSB7XG4gICAgICAgIGRvY3VtZW50LmxhYmVsID0gKGRvY3VtZW50LmxhYmVsICsgJyAoRG9jdW1lbnQpJyk7XG5cbiAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0YXNrT3B0aW9ucy5jb25jYXQoZG9jdW1lbnRPcHRpb25zKTtcbiAgICB9XG4gIH1cbn0pKGFuZ3VsYXIpO1xuIiwiLyogZ2xvYmFsIGFuZ3VsYXIgKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnY3JtLXRhc2tzLXdvcmtmbG93cy5kZWNvcmF0b3JzJylcbiAgICAuY29uZmlnKFsnJHByb3ZpZGUnLCBmdW5jdGlvbiAoJHByb3ZpZGUpIHtcbiAgICAgICRwcm92aWRlLmRlY29yYXRvcignJHJvdXRlJywgUm91dGVEZWNvcmF0b3IpO1xuICAgIH1dKTtcblxuICBSb3V0ZURlY29yYXRvci4kaW5qZWN0ID0gWyckZGVsZWdhdGUnXTtcblxuICBmdW5jdGlvbiBSb3V0ZURlY29yYXRvciAoJGRlbGVnYXRlKSB7XG4gICAgKGZ1bmN0aW9uIGluaXQgKCkge1xuICAgICAgdmFyIGNhc2VUeXBlRWRpdFJvdXRlID0gJGRlbGVnYXRlLnJvdXRlc1snL2Nhc2VUeXBlLzppZCddO1xuICAgICAgdmFyIGNhc2VUeXBlTGlzdFJvdXRlID0gJGRlbGVnYXRlLnJvdXRlc1snL2Nhc2VUeXBlJ107XG5cbiAgICAgIGNhc2VUeXBlRWRpdFJvdXRlLmNvbnRyb2xsZXIgPSAnQ2FzZVR5cGVFeHRlbmRlZENvbnRyb2xsZXInO1xuICAgICAgY2FzZVR5cGVFZGl0Um91dGUucmVzb2x2ZS5hY3Rpdml0eU9wdGlvbnNUYXNrID0gZ2V0UmVzb2x2ZXJGb3JBY3Rpdml0eVR5cGVDb21wb25lbnQoJ0NpdmlUYXNrJyk7XG4gICAgICBjYXNlVHlwZUVkaXRSb3V0ZS5yZXNvbHZlLmFjdGl2aXR5T3B0aW9uc0RvY3VtZW50ID0gZ2V0UmVzb2x2ZXJGb3JBY3Rpdml0eVR5cGVDb21wb25lbnQoJ0NpdmlEb2N1bWVudCcpO1xuXG4gICAgICBjYXNlVHlwZUxpc3RSb3V0ZS5yZXNvbHZlLmNhc2VUeXBlcyA9IGdldFJlc29sdmVyRm9yV29ya2Zsb3dUeXBlcygpO1xuICAgIH0pKCk7XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcmVzb2x2ZXIgZm9yIHRoZSBsaXN0IG9mIGFjdGl2aXR5IHR5cGVzIGZvciBhIHBhcnRpY3VsYXIgY29tcG9uZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBjb21wb25lbnROYW1lIC0gdGhlIG5hbWUgb2YgdGhlIGFjdGl2aXR5IHR5cGUncyBjb21wb25lbnQuXG4gICAgICogQHJldHVybiB7QXJyYXl9ICBBbiBhcnJheSBjb250YWluaW5nIHRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgcmVzb2x2ZSB0aGUgYWN0aXZpdHkgdHlwZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0UmVzb2x2ZXJGb3JBY3Rpdml0eVR5cGVDb21wb25lbnQgKGNvbXBvbmVudE5hbWUpIHtcbiAgICAgIHJldHVybiBbJ2NybUFwaScsIGZ1bmN0aW9uIGFjdGl2aXR5T3B0aW9uc1Jlc29sdmVyIChjcm1BcGkpIHtcbiAgICAgICAgcmV0dXJuIGNybUFwaSgnT3B0aW9uVmFsdWUnLCAnZ2V0Jywge1xuICAgICAgICAgIG9wdGlvbl9ncm91cF9pZDogJ2FjdGl2aXR5X3R5cGUnLFxuICAgICAgICAgIGNvbXBvbmVudF9pZDogY29tcG9uZW50TmFtZSxcbiAgICAgICAgICBzZXF1ZW50aWFsOiAxLFxuICAgICAgICAgIG9wdGlvbnM6IHsgc29ydDogJ25hbWUnLCBsaW1pdDogMCB9XG4gICAgICAgIH0pO1xuICAgICAgfV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHJlc29sdmVyIGZvciB0aGUgbGlzdCBvZiB3b3JrZmxvdyBjYXNlIHR5cGVzLlxuICAgICAqIFRvIGZpbHRlciBieSBjYXRlZ29yeSB3ZSBuZWVkIHRvIHVzZSB0aGUgY3VzdG9tIGNhdGVnb3J5IGZpZWxkIGlkIGFzXG4gICAgICogcHJvdmlkZWQgYnkgdGhlIENSTSB2YXJzLiBUaGUgY2F0ZWdvcnkgZmllbGQgY2FuIGJlIHJlZmVyZW5jZWQgYnkgdXNpbmdcbiAgICAgKiBgY3VzdG9tXzEyM2Agd2hlcmUgYDEyM2AgaXMgdGhlIGlkIG9mIHRoZSBjYXRlZ29yeSBmaWVsZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0aGUgZnVuY3Rpb24gdGhhdCB3aWxsIHJlc29sdmUgdGhlIHdvcmtmbG93IGNhc2UgdHlwZXMuXG4gICAgICovXG4gICAgZnVuY3Rpb24gZ2V0UmVzb2x2ZXJGb3JXb3JrZmxvd1R5cGVzICgpIHtcbiAgICAgIHJldHVybiBbJ2NybUFwaScsICdjdXN0b21GaWVsZElkcycsIGZ1bmN0aW9uIHdvcmtmbG93VHlwZXNSZXNvbHZlciAoY3JtQXBpLCBjdXN0b21GaWVsZElkcykge1xuICAgICAgICB2YXIgY2FzZVR5cGVDYXRlZ29yeUZpZWxkID0gJ2N1c3RvbV8nICsgY3VzdG9tRmllbGRJZHNbJ2Nhc2VUeXBlLmNhdGVnb3J5J107XG4gICAgICAgIHZhciBmaWx0ZXJzID0geyBvcHRpb25zOiB7IGxpbWl0OiAwIH0gfTtcbiAgICAgICAgZmlsdGVyc1sgY2FzZVR5cGVDYXRlZ29yeUZpZWxkIF0gPSAnV29ya2Zsb3cnO1xuXG4gICAgICAgIHJldHVybiBjcm1BcGkoJ0Nhc2VUeXBlJywgJ2dldCcsIGZpbHRlcnMpO1xuICAgICAgfV07XG4gICAgfVxuXG4gICAgcmV0dXJuICRkZWxlZ2F0ZTtcbiAgfVxufSkoYW5ndWxhcik7XG4iLCIvKiBnbG9iYWwgYW5ndWxhciAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdjcm0tdGFza3Mtd29ya2Zsb3dzJywgW1xuICAgICdjcm0tdGFza3Mtd29ya2Zsb3dzLmNvcmUnLFxuICAgICdjcm0tdGFza3Mtd29ya2Zsb3dzLmNvbnN0YW50cycsXG4gICAgJ2NybS10YXNrcy13b3JrZmxvd3MuY29udHJvbGxlcnMnLFxuICAgICdjcm0tdGFza3Mtd29ya2Zsb3dzLmRlY29yYXRvcnMnXG4gIF0pO1xufSkoYW5ndWxhcik7XG4iXX0=
