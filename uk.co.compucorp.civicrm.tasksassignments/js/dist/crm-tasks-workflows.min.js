!function(t,e){"use strict";t.module("crm-tasks-workflows.constants",[]).constant("customFieldIds",e.vars.customFieldIds)}(angular,CRM),function(t){"use strict";angular.module("crm-tasks-workflows.controllers",[])}(),function(t){"use strict";angular.module("crm-tasks-workflows.core",["crmCaseType"])}(),function(t){"use strict";angular.module("crm-tasks-workflows.decorators",[])}(),function(t){"use strict";function e(t,e,o,s,a,r,n){e.debug("Controller: CaseTypeExtendedController");var i,c,l,u,p={};function d(t,e){p.addActivity(t,e),t.activityTypes.forEach(function(t){t.name===e&&delete t.reference_activity})}a.actTypes={values:(c=r.values.map(function(t){return t.label=t.label+" (Task)",t}),l=n.values.map(function(t){return t.label=t.label+" (Document)",t}),c.concat(l))},t("CaseTypeCtrl",{$scope:o,crmApi:s,apiCalls:a}),p.addActivity=o.addActivity,o.addActivity=d,o.defaultRelationshipTypeOptions=(u=a.relTypes.values.filter(function(t){return"1"===t.is_active}),CRM._.transform(u,function(t,e){var o=e.label_a_b===e.label_b_a;t.push({label:e.label_b_a,value:e.id+"_b_a"}),o||t.push({label:e.label_a_b,value:e.id+"_a_b"})},[])),i=!o.caseType.id,console.log("@@@@",o.defaultRelationshipTypeOptions),i&&(o.caseType.definition.activitySets[0].activityTypes=[])}angular.module("crm-tasks-workflows.controllers").controller("CaseTypeExtendedController",e),e.$inject=["$controller","$log","$scope","crmApi","apiCalls","activityOptionsTask","activityOptionsDocument"]}(),function(t){"use strict";function e(t){var e,o;function s(e){return["crmApi",function(t){return t("OptionValue","get",{option_group_id:"activity_type",component_id:e,sequential:1,options:{sort:"name",limit:0}})}]}return e=t.routes["/caseType/:id"],o=t.routes["/caseType"],e.controller="CaseTypeExtendedController",e.resolve.activityOptionsTask=s("CiviTask"),e.resolve.activityOptionsDocument=s("CiviDocument"),o.resolve.caseTypes=["crmApi","customFieldIds",function(t,e){var o="custom_"+e["caseType.category"],s={options:{limit:0}};return s[o]="Workflow",t("CaseType","get",s)}],t}angular.module("crm-tasks-workflows.decorators").config(["$provide",function(t){t.decorator("$route",e)}]),e.$inject=["$delegate"]}(),function(t){"use strict";angular.module("crm-tasks-workflows",["crm-tasks-workflows.core","crm-tasks-workflows.constants","crm-tasks-workflows.controllers","crm-tasks-workflows.decorators"])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNybS10YXNrcy13b3JrZmxvd3MuY29uc3RhbnRzLmpzIiwiY3JtLXRhc2tzLXdvcmtmbG93cy5jb250cm9sbGVycy5qcyIsImNybS10YXNrcy13b3JrZmxvd3MuY29yZS5qcyIsImNybS10YXNrcy13b3JrZmxvd3MuZGVjb3JhdG9yLmpzIiwiY2FzZXR5cGUuZXh0ZW5kZWQuY29udHJvbGxlci5qcyIsInJvdXRlLmRlY29yYXRvci5qcyIsImNybS10YXNrcy13b3JrZmxvd3MuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIkNSTSIsIm1vZHVsZSIsImNvbnN0YW50IiwidmFycyIsImN1c3RvbUZpZWxkSWRzIiwiQ2FzZVR5cGVFeHRlbmRlZENvbnRyb2xsZXIiLCIkY29udHJvbGxlciIsIiRsb2ciLCIkc2NvcGUiLCJjcm1BcGkiLCJhcGlDYWxscyIsImFjdGl2aXR5T3B0aW9uc1Rhc2siLCJhY3Rpdml0eU9wdGlvbnNEb2N1bWVudCIsImRlYnVnIiwiaXNOZXdDYXNlVHlwZSIsInRhc2tPcHRpb25zIiwiZG9jdW1lbnRPcHRpb25zIiwiYWN0aXZlUmVsYXRpb25zaGlwVHlwZXMiLCJwYXJlbnRNZXRob2RzIiwiYWRkQWN0aXZpdHkiLCJhY3Rpdml0eVNldCIsImFjdGl2aXR5VHlwZSIsImFjdGl2aXR5VHlwZXMiLCJmb3JFYWNoIiwiYWN0aXZpdHkiLCJuYW1lIiwicmVmZXJlbmNlX2FjdGl2aXR5IiwiYWN0VHlwZXMiLCJ2YWx1ZXMiLCJtYXAiLCJ0eXBlIiwibGFiZWwiLCJkb2N1bWVudCIsImNvbmNhdCIsImRlZmF1bHRSZWxhdGlvbnNoaXBUeXBlT3B0aW9ucyIsInJlbFR5cGVzIiwiZmlsdGVyIiwicmVsYXRpb25zaGlwVHlwZSIsImlzX2FjdGl2ZSIsIl8iLCJ0cmFuc2Zvcm0iLCJyZXN1bHQiLCJyZWxUeXBlIiwiaXNCaWRpcmVjdGlvbmFsUmVsYXRpb25zaGlwIiwibGFiZWxfYV9iIiwibGFiZWxfYl9hIiwicHVzaCIsInZhbHVlIiwiaWQiLCJjYXNlVHlwZSIsImNvbnNvbGUiLCJsb2ciLCJkZWZpbml0aW9uIiwiYWN0aXZpdHlTZXRzIiwiY29udHJvbGxlciIsIiRpbmplY3QiLCJSb3V0ZURlY29yYXRvciIsIiRkZWxlZ2F0ZSIsImNhc2VUeXBlRWRpdFJvdXRlIiwiY2FzZVR5cGVMaXN0Um91dGUiLCJnZXRSZXNvbHZlckZvckFjdGl2aXR5VHlwZUNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJvcHRpb25fZ3JvdXBfaWQiLCJjb21wb25lbnRfaWQiLCJzZXF1ZW50aWFsIiwib3B0aW9ucyIsInNvcnQiLCJsaW1pdCIsInJvdXRlcyIsInJlc29sdmUiLCJjYXNlVHlwZXMiLCJjYXNlVHlwZUNhdGVnb3J5RmllbGQiLCJmaWx0ZXJzIiwiY29uZmlnIiwiJHByb3ZpZGUiLCJkZWNvcmF0b3IiXSwibWFwcGluZ3MiOiJDQUVBLFNBQUFBLEVBQUFDLEdBQ0EsYUFFQUQsRUFBQUUsT0FBQSxnQ0FBQSxJQUNBQyxTQUFBLGlCQUFBRixFQUFBRyxLQUFBQyxnQkFKQSxDQUtBTCxRQUFBQyxLQ0xBLFNBQUFELEdBQ0EsYUFHQUEsUUFEQUUsT0FBQSxrQ0FBQSxJQUhBLEdDQUEsU0FBQUYsR0FDQSxhQUtBQSxRQUhBRSxPQUFBLDJCQUFBLENBQ0EsZ0JBSkEsR0NBQSxTQUFBRixHQUNBLGFBR0FBLFFBREFFLE9BQUEsaUNBQUEsSUFIQSxHQ0FBLFNBQUFGLEdBQ0EsYUFTQSxTQUFBTSxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBTCxFQUFBTSxNQUFBLDBDQUVBLElBR0FDLEVBb0ZBQyxFQU1BQyxFQWxEQUMsRUEzQ0FDLEVBQUEsR0F3QkEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQUgsRUFBQUMsWUFBQUMsRUFBQUMsR0FHQUQsRUFBQUUsY0FBQUMsUUFBQSxTQUFBQyxHQUNBQSxFQUFBQyxPQUFBSixVQUNBRyxFQUFBRSxxQkErQ0FoQixFQUFBaUIsU0FBQSxDQUFBQyxRQVVBYixFQUFBSixFQUFBaUIsT0FBQUMsSUFBQSxTQUFBQyxHQUdBLE9BRkFBLEVBQUFDLE1BQUFELEVBQUFDLE1BQUEsVUFFQUQsSUFHQWQsRUFBQUosRUFBQWdCLE9BQUFDLElBQUEsU0FBQUcsR0FHQSxPQUZBQSxFQUFBRCxNQUFBQyxFQUFBRCxNQUFBLGNBRUFDLElBR0FqQixFQUFBa0IsT0FBQWpCLEtBckJBVixFQUFBLGVBQUEsQ0FBQUUsT0FBQUEsRUFBQUMsT0FBQUEsRUFBQUMsU0FBQUEsSUF2RUFRLEVBQUFDLFlBQUFYLEVBQUFXLFlBQ0FYLEVBQUFXLFlBQUFBLEVBQ0FYLEVBQUEwQixnQ0FrQ0FqQixFQXlCQVAsRUFBQXlCLFNBQUFQLE9BQUFRLE9BQUEsU0FBQUMsR0FDQSxNQUFBLE1BQUFBLEVBQUFDLFlBeEJBdEMsSUFBQXVDLEVBQUFDLFVBQUF2QixFQUFBLFNBQUF3QixFQUFBQyxHQUNBLElBQUFDLEVBQUFELEVBQUFFLFlBQUFGLEVBQUFHLFVBRUFKLEVBQUFLLEtBQUEsQ0FDQWYsTUFBQVcsRUFBQUcsVUFDQUUsTUFBQUwsRUFBQU0sR0FBQSxTQUdBTCxHQUNBRixFQUFBSyxLQUFBLENBQ0FmLE1BQUFXLEVBQUFFLFVBQ0FHLE1BQUFMLEVBQUFNLEdBQUEsVUFHQSxLQWpEQWxDLEdBQUFOLEVBQUF5QyxTQUFBRCxHQUNBRSxRQUFBQyxJQUFBLE9BQUEzQyxFQUFBMEIsZ0NBRUFwQixJQTBCQU4sRUFBQXlDLFNBQUFHLFdBQUFDLGFBQUEsR0FBQS9CLGNBQUEsSUErREF2QixRQWhIQUUsT0FBQSxtQ0FDQXFELFdBQUEsNkJBQUFqRCxHQUVBQSxFQUFBa0QsUUFBQSxDQUNBLGNBQUEsT0FBQSxTQUFBLFNBQUEsV0FBQSxzQkFBQSwyQkFQQSxHQ0FBLFNBQUF4RCxHQUNBLGFBU0EsU0FBQXlELEVBQUFDLEdBQ0EsSUFDQUMsRUFDQUMsRUFlQSxTQUFBQyxFQUFBQyxHQUNBLE1BQUEsQ0FBQSxTQUFBLFNBQUFwRCxHQUNBLE9BQUFBLEVBQUEsY0FBQSxNQUFBLENBQ0FxRCxnQkFBQSxnQkFDQUMsYUFBQUYsRUFDQUcsV0FBQSxFQUNBQyxRQUFBLENBQUFDLEtBQUEsT0FBQUMsTUFBQSxPQXVCQSxPQTdDQVQsRUFBQUQsRUFBQVcsT0FBQSxpQkFDQVQsRUFBQUYsRUFBQVcsT0FBQSxhQUVBVixFQUFBSixXQUFBLDZCQUNBSSxFQUFBVyxRQUFBMUQsb0JBQUFpRCxFQUFBLFlBQ0FGLEVBQUFXLFFBQUF6RCx3QkFBQWdELEVBQUEsZ0JBRUFELEVBQUFVLFFBQUFDLFVBNkJBLENBQUEsU0FBQSxpQkFBQSxTQUFBN0QsRUFBQUwsR0FDQSxJQUFBbUUsRUFBQSxVQUFBbkUsRUFBQSxxQkFDQW9FLEVBQUEsQ0FBQVAsUUFBQSxDQUFBRSxNQUFBLElBR0EsT0FGQUssRUFBQUQsR0FBQSxXQUVBOUQsRUFBQSxXQUFBLE1BQUErRCxLQUlBZixFQUVBMUQsUUF4REFFLE9BQUEsa0NBQ0F3RSxPQUFBLENBQUEsV0FBQSxTQUFBQyxHQUNBQSxFQUFBQyxVQUFBLFNBQUFuQixNQUdBQSxFQUFBRCxRQUFBLENBQUEsYUFSQSxHQ0FBLFNBQUF4RCxHQUNBLGFBUUFBLFFBTkFFLE9BQUEsc0JBQUEsQ0FDQSwyQkFDQSxnQ0FDQSxrQ0FDQSxtQ0FQQSIsImZpbGUiOiJjcm0tdGFza3Mtd29ya2Zsb3dzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBhbmd1bGFyICovXG5cbihmdW5jdGlvbiAoYW5ndWxhciwgQ1JNKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnY3JtLXRhc2tzLXdvcmtmbG93cy5jb25zdGFudHMnLCBbXSlcbiAgICAuY29uc3RhbnQoJ2N1c3RvbUZpZWxkSWRzJywgQ1JNLnZhcnMuY3VzdG9tRmllbGRJZHMpO1xufSkoYW5ndWxhciwgQ1JNKTtcbiIsIi8qIGdsb2JhbCBhbmd1bGFyICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2NybS10YXNrcy13b3JrZmxvd3MuY29udHJvbGxlcnMnLCBbXSk7XG59KShhbmd1bGFyKTtcbiIsIi8qIGdsb2JhbCBhbmd1bGFyICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2NybS10YXNrcy13b3JrZmxvd3MuY29yZScsIFtcbiAgICAnY3JtQ2FzZVR5cGUnXG4gIF0pO1xufSkoYW5ndWxhcik7XG4iLCIvKiBnbG9iYWwgYW5ndWxhciAqL1xuXG4oZnVuY3Rpb24gKGFuZ3VsYXIpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdjcm0tdGFza3Mtd29ya2Zsb3dzLmRlY29yYXRvcnMnLCBbXSk7XG59KShhbmd1bGFyKTtcbiIsIi8qIGdsb2JhbCBhbmd1bGFyICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2NybS10YXNrcy13b3JrZmxvd3MuY29udHJvbGxlcnMnKVxuICAgIC5jb250cm9sbGVyKCdDYXNlVHlwZUV4dGVuZGVkQ29udHJvbGxlcicsIENhc2VUeXBlRXh0ZW5kZWRDb250cm9sbGVyKTtcblxuICBDYXNlVHlwZUV4dGVuZGVkQ29udHJvbGxlci4kaW5qZWN0ID0gW1xuICAgICckY29udHJvbGxlcicsICckbG9nJywgJyRzY29wZScsICdjcm1BcGknLCAnYXBpQ2FsbHMnLCAnYWN0aXZpdHlPcHRpb25zVGFzaycsICdhY3Rpdml0eU9wdGlvbnNEb2N1bWVudCdcbiAgXTtcblxuICBmdW5jdGlvbiBDYXNlVHlwZUV4dGVuZGVkQ29udHJvbGxlciAoJGNvbnRyb2xsZXIsICRsb2csICRzY29wZSwgY3JtQXBpLCBhcGlDYWxscywgYWN0aXZpdHlPcHRpb25zVGFzaywgYWN0aXZpdHlPcHRpb25zRG9jdW1lbnQpIHtcbiAgICAkbG9nLmRlYnVnKCdDb250cm9sbGVyOiBDYXNlVHlwZUV4dGVuZGVkQ29udHJvbGxlcicpO1xuXG4gICAgdmFyIHBhcmVudE1ldGhvZHMgPSB7fTtcblxuICAgIChmdW5jdGlvbiBpbml0ICgpIHtcbiAgICAgIHZhciBpc05ld0Nhc2VUeXBlO1xuXG4gICAgICBpbml0UGFyZW50Q29udHJvbGxlcigpO1xuXG4gICAgICBwYXJlbnRNZXRob2RzLmFkZEFjdGl2aXR5ID0gJHNjb3BlLmFkZEFjdGl2aXR5O1xuICAgICAgJHNjb3BlLmFkZEFjdGl2aXR5ID0gYWRkQWN0aXZpdHk7XG4gICAgICAkc2NvcGUuZGVmYXVsdFJlbGF0aW9uc2hpcFR5cGVPcHRpb25zID0gZ2V0RGVmYXVsdFJlbGF0aW9uc2hpcFR5cGVPcHRpb25zKCk7XG4gICAgICBpc05ld0Nhc2VUeXBlID0gISRzY29wZS5jYXNlVHlwZS5pZDtcbiAgICAgIGNvbnNvbGUubG9nKCdAQEBAJywgJHNjb3BlLmRlZmF1bHRSZWxhdGlvbnNoaXBUeXBlT3B0aW9ucyk7XG5cbiAgICAgIGlmIChpc05ld0Nhc2VUeXBlKSB7XG4gICAgICAgIGNsZWFyQWxsQWN0aXZpdHlUeXBlc0Zyb21NYWluQWN0aXZpdHlTZXQoKTtcbiAgICAgIH1cbiAgICB9KSgpO1xuXG4gICAgLyoqXG4gICAgICogQWRkIG5ldyBhY3Rpdml0eVxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gYWN0aXZpdHlTZXRcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aXZpdHlUeXBlXG4gICAgICovXG4gICAgZnVuY3Rpb24gYWRkQWN0aXZpdHkgKGFjdGl2aXR5U2V0LCBhY3Rpdml0eVR5cGUpIHtcbiAgICAgIHBhcmVudE1ldGhvZHMuYWRkQWN0aXZpdHkoYWN0aXZpdHlTZXQsIGFjdGl2aXR5VHlwZSk7XG5cbiAgICAgIC8vIHJlbW92ZSByZWZlcmVuY2VfYWN0aXZpdHkgcHJvcGVydHkgZnJvbSBuZXdseSBhZGRlZCBhY3Rpdml0eVxuICAgICAgYWN0aXZpdHlTZXQuYWN0aXZpdHlUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uIChhY3Rpdml0eSkge1xuICAgICAgICBpZiAoYWN0aXZpdHkubmFtZSA9PT0gYWN0aXZpdHlUeXBlKSB7XG4gICAgICAgICAgZGVsZXRlIGFjdGl2aXR5LnJlZmVyZW5jZV9hY3Rpdml0eTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGFsbCB0aGUgYWN0aXZpdHkgdHlwZXMgZGVmaW5lZCBpbiB0aGUgbWFpbiBhY3Rpdml0eSBzZXQuXG4gICAgICovXG4gICAgZnVuY3Rpb24gY2xlYXJBbGxBY3Rpdml0eVR5cGVzRnJvbU1haW5BY3Rpdml0eVNldCAoKSB7XG4gICAgICAkc2NvcGUuY2FzZVR5cGUuZGVmaW5pdGlvbi5hY3Rpdml0eVNldHNbMF0uYWN0aXZpdHlUeXBlcyA9IFtdO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldERlZmF1bHRSZWxhdGlvbnNoaXBUeXBlT3B0aW9ucyAoKSB7XG4gICAgICB2YXIgYWN0aXZlUmVsYXRpb25zaGlwVHlwZXMgPSBnZXRBY3RpdmVSZWxhdGlvbnNoaXBUeXBlcygpO1xuXG4gICAgICByZXR1cm4gQ1JNLl8udHJhbnNmb3JtKGFjdGl2ZVJlbGF0aW9uc2hpcFR5cGVzLCBmdW5jdGlvbihyZXN1bHQsIHJlbFR5cGUpIHtcbiAgICAgICAgdmFyIGlzQmlkaXJlY3Rpb25hbFJlbGF0aW9uc2hpcCA9IHJlbFR5cGUubGFiZWxfYV9iID09PSByZWxUeXBlLmxhYmVsX2JfYTtcblxuICAgICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgICAgbGFiZWw6IHJlbFR5cGUubGFiZWxfYl9hLFxuICAgICAgICAgIHZhbHVlOiByZWxUeXBlLmlkICsgJ19iX2EnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghaXNCaWRpcmVjdGlvbmFsUmVsYXRpb25zaGlwKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goe1xuICAgICAgICAgICAgbGFiZWw6IHJlbFR5cGUubGFiZWxfYV9iLFxuICAgICAgICAgICAgdmFsdWU6IHJlbFR5cGUuaWQgKyAnX2FfYidcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSwgW10pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsaXN0IG9mIGFjdGl2ZSByZWxhdGlvbnNoaXAgdHlwZXMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICAgKi9cbiAgICBmdW5jdGlvbiBnZXRBY3RpdmVSZWxhdGlvbnNoaXBUeXBlcyAoKSB7XG4gICAgICByZXR1cm4gYXBpQ2FsbHMucmVsVHlwZXMudmFsdWVzLmZpbHRlcihmdW5jdGlvbiAocmVsYXRpb25zaGlwVHlwZSkge1xuICAgICAgICByZXR1cm4gcmVsYXRpb25zaGlwVHlwZS5pc19hY3RpdmUgPT09ICcxJztcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpc2UgdGhlIHBhcmVudCBjb250cm9sbGVyXG4gICAgICovXG4gICAgZnVuY3Rpb24gaW5pdFBhcmVudENvbnRyb2xsZXIgKCkge1xuICAgICAgYXBpQ2FsbHMuYWN0VHlwZXMgPSB7IHZhbHVlczogcHJlcGFyZUFjdGl2aXR5VHlwZXMoKSB9O1xuICAgICAgJGNvbnRyb2xsZXIoJ0Nhc2VUeXBlQ3RybCcsIHskc2NvcGU6ICRzY29wZSwgY3JtQXBpOiBjcm1BcGksIGFwaUNhbGxzOiBhcGlDYWxsc30pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsaXN0IG9mIGFjdGl2aXR5IHR5cGVzIHdpdGggY29tcG9uZW50IHR5cGUgYWRkZWQgdG8gbGFiZWxcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0FycmF5fVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHByZXBhcmVBY3Rpdml0eVR5cGVzICgpIHtcbiAgICAgIHZhciB0YXNrT3B0aW9ucyA9IGFjdGl2aXR5T3B0aW9uc1Rhc2sudmFsdWVzLm1hcChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgICB0eXBlLmxhYmVsID0gKHR5cGUubGFiZWwgKyAnIChUYXNrKScpO1xuXG4gICAgICAgIHJldHVybiB0eXBlO1xuICAgICAgfSk7XG5cbiAgICAgIHZhciBkb2N1bWVudE9wdGlvbnMgPSBhY3Rpdml0eU9wdGlvbnNEb2N1bWVudC52YWx1ZXMubWFwKGZ1bmN0aW9uIChkb2N1bWVudCkge1xuICAgICAgICBkb2N1bWVudC5sYWJlbCA9IChkb2N1bWVudC5sYWJlbCArICcgKERvY3VtZW50KScpO1xuXG4gICAgICAgIHJldHVybiBkb2N1bWVudDtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdGFza09wdGlvbnMuY29uY2F0KGRvY3VtZW50T3B0aW9ucyk7XG4gICAgfVxuICB9XG59KShhbmd1bGFyKTtcbiIsIi8qIGdsb2JhbCBhbmd1bGFyICovXG5cbihmdW5jdGlvbiAoYW5ndWxhcikge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhci5tb2R1bGUoJ2NybS10YXNrcy13b3JrZmxvd3MuZGVjb3JhdG9ycycpXG4gICAgLmNvbmZpZyhbJyRwcm92aWRlJywgZnVuY3Rpb24gKCRwcm92aWRlKSB7XG4gICAgICAkcHJvdmlkZS5kZWNvcmF0b3IoJyRyb3V0ZScsIFJvdXRlRGVjb3JhdG9yKTtcbiAgICB9XSk7XG5cbiAgUm91dGVEZWNvcmF0b3IuJGluamVjdCA9IFsnJGRlbGVnYXRlJ107XG5cbiAgZnVuY3Rpb24gUm91dGVEZWNvcmF0b3IgKCRkZWxlZ2F0ZSkge1xuICAgIChmdW5jdGlvbiBpbml0ICgpIHtcbiAgICAgIHZhciBjYXNlVHlwZUVkaXRSb3V0ZSA9ICRkZWxlZ2F0ZS5yb3V0ZXNbJy9jYXNlVHlwZS86aWQnXTtcbiAgICAgIHZhciBjYXNlVHlwZUxpc3RSb3V0ZSA9ICRkZWxlZ2F0ZS5yb3V0ZXNbJy9jYXNlVHlwZSddO1xuXG4gICAgICBjYXNlVHlwZUVkaXRSb3V0ZS5jb250cm9sbGVyID0gJ0Nhc2VUeXBlRXh0ZW5kZWRDb250cm9sbGVyJztcbiAgICAgIGNhc2VUeXBlRWRpdFJvdXRlLnJlc29sdmUuYWN0aXZpdHlPcHRpb25zVGFzayA9IGdldFJlc29sdmVyRm9yQWN0aXZpdHlUeXBlQ29tcG9uZW50KCdDaXZpVGFzaycpO1xuICAgICAgY2FzZVR5cGVFZGl0Um91dGUucmVzb2x2ZS5hY3Rpdml0eU9wdGlvbnNEb2N1bWVudCA9IGdldFJlc29sdmVyRm9yQWN0aXZpdHlUeXBlQ29tcG9uZW50KCdDaXZpRG9jdW1lbnQnKTtcblxuICAgICAgY2FzZVR5cGVMaXN0Um91dGUucmVzb2x2ZS5jYXNlVHlwZXMgPSBnZXRSZXNvbHZlckZvcldvcmtmbG93VHlwZXMoKTtcbiAgICB9KSgpO1xuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHJlc29sdmVyIGZvciB0aGUgbGlzdCBvZiBhY3Rpdml0eSB0eXBlcyBmb3IgYSBwYXJ0aWN1bGFyIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gY29tcG9uZW50TmFtZSAtIHRoZSBuYW1lIG9mIHRoZSBhY3Rpdml0eSB0eXBlJ3MgY29tcG9uZW50LlxuICAgICAqIEByZXR1cm4ge0FycmF5fSAgQW4gYXJyYXkgY29udGFpbmluZyB0aGUgZnVuY3Rpb24gdGhhdCB3aWxsIHJlc29sdmUgdGhlIGFjdGl2aXR5IHR5cGVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFJlc29sdmVyRm9yQWN0aXZpdHlUeXBlQ29tcG9uZW50IChjb21wb25lbnROYW1lKSB7XG4gICAgICByZXR1cm4gWydjcm1BcGknLCBmdW5jdGlvbiBhY3Rpdml0eU9wdGlvbnNSZXNvbHZlciAoY3JtQXBpKSB7XG4gICAgICAgIHJldHVybiBjcm1BcGkoJ09wdGlvblZhbHVlJywgJ2dldCcsIHtcbiAgICAgICAgICBvcHRpb25fZ3JvdXBfaWQ6ICdhY3Rpdml0eV90eXBlJyxcbiAgICAgICAgICBjb21wb25lbnRfaWQ6IGNvbXBvbmVudE5hbWUsXG4gICAgICAgICAgc2VxdWVudGlhbDogMSxcbiAgICAgICAgICBvcHRpb25zOiB7IHNvcnQ6ICduYW1lJywgbGltaXQ6IDAgfVxuICAgICAgICB9KTtcbiAgICAgIH1dO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSByZXNvbHZlciBmb3IgdGhlIGxpc3Qgb2Ygd29ya2Zsb3cgY2FzZSB0eXBlcy5cbiAgICAgKiBUbyBmaWx0ZXIgYnkgY2F0ZWdvcnkgd2UgbmVlZCB0byB1c2UgdGhlIGN1c3RvbSBjYXRlZ29yeSBmaWVsZCBpZCBhc1xuICAgICAqIHByb3ZpZGVkIGJ5IHRoZSBDUk0gdmFycy4gVGhlIGNhdGVnb3J5IGZpZWxkIGNhbiBiZSByZWZlcmVuY2VkIGJ5IHVzaW5nXG4gICAgICogYGN1c3RvbV8xMjNgIHdoZXJlIGAxMjNgIGlzIHRoZSBpZCBvZiB0aGUgY2F0ZWdvcnkgZmllbGQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCByZXNvbHZlIHRoZSB3b3JrZmxvdyBjYXNlIHR5cGVzLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGdldFJlc29sdmVyRm9yV29ya2Zsb3dUeXBlcyAoKSB7XG4gICAgICByZXR1cm4gWydjcm1BcGknLCAnY3VzdG9tRmllbGRJZHMnLCBmdW5jdGlvbiB3b3JrZmxvd1R5cGVzUmVzb2x2ZXIgKGNybUFwaSwgY3VzdG9tRmllbGRJZHMpIHtcbiAgICAgICAgdmFyIGNhc2VUeXBlQ2F0ZWdvcnlGaWVsZCA9ICdjdXN0b21fJyArIGN1c3RvbUZpZWxkSWRzWydjYXNlVHlwZS5jYXRlZ29yeSddO1xuICAgICAgICB2YXIgZmlsdGVycyA9IHsgb3B0aW9uczogeyBsaW1pdDogMCB9IH07XG4gICAgICAgIGZpbHRlcnNbIGNhc2VUeXBlQ2F0ZWdvcnlGaWVsZCBdID0gJ1dvcmtmbG93JztcblxuICAgICAgICByZXR1cm4gY3JtQXBpKCdDYXNlVHlwZScsICdnZXQnLCBmaWx0ZXJzKTtcbiAgICAgIH1dO1xuICAgIH1cblxuICAgIHJldHVybiAkZGVsZWdhdGU7XG4gIH1cbn0pKGFuZ3VsYXIpO1xuIiwiLyogZ2xvYmFsIGFuZ3VsYXIgKi9cblxuKGZ1bmN0aW9uIChhbmd1bGFyKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnY3JtLXRhc2tzLXdvcmtmbG93cycsIFtcbiAgICAnY3JtLXRhc2tzLXdvcmtmbG93cy5jb3JlJyxcbiAgICAnY3JtLXRhc2tzLXdvcmtmbG93cy5jb25zdGFudHMnLFxuICAgICdjcm0tdGFza3Mtd29ya2Zsb3dzLmNvbnRyb2xsZXJzJyxcbiAgICAnY3JtLXRhc2tzLXdvcmtmbG93cy5kZWNvcmF0b3JzJ1xuICBdKTtcbn0pKGFuZ3VsYXIpO1xuIl19
